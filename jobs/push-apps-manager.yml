---
name: push-apps-manager
release: push-apps-manager-release
manifest: |
  bpm:
    enabled: true
  apps_manager:
    foundations: (( .properties.push_apps_manager_foundations.value ))
    generic_white_labeling:
      global_wrapper_footer_content: (( .properties.push_apps_manager_global_wrapper_footer_content.value ))
      accent_color: (( .properties.push_apps_manager_accent_color.value ))
      footer_links: (( .properties.push_apps_manager_footer_links.value ))
      footer_text: (( .properties.push_apps_manager_footer_text.value ))
      global_wrapper_bg_color: (( .properties.push_apps_manager_global_wrapper_bg_color.value ))
      global_wrapper_text_color: (( .properties.push_apps_manager_global_wrapper_text_color.value ))
      global_wrapper_header_content: (( .properties.push_apps_manager_global_wrapper_header_content.value ))
      company_name: (( .properties.push_apps_manager_company_name.value || "Pivotal" ))
      square_logo: (( .properties.push_apps_manager_square_logo.value ))
      favicon: (( .properties.push_apps_manager_favicon.value ))
    cf_dial_timeout: (( .properties.cf_dial_timeout_in_seconds.value ))
    enable_invitations: (( .properties.push_apps_manager_enable_invitations.value ))
    display_plan_prices: (( .properties.push_apps_manager_display_plan_prices.value ))
    currency_lookup: (( .properties.push_apps_manager_currency_lookup.value ))
    instances: $( variable "push_apps_manager_instances" )
    memory: (( .properties.push_apps_manager_memory.value ))
    poll_interval: (( .properties.push_apps_manager_poll_interval.value ))
    app_poll_interval: (( .properties.push_apps_manager_app_poll_interval.value ))
    white_labeling:
      marketplace_name: (( .properties.push_apps_manager_marketplace_name.value ))
      nav_links: (( .properties.push_apps_manager_nav_links.value ))
      product_name: (( .properties.push_apps_manager_product_name.value ))
  app_usage_service:
    url: https://app-usage.(( .cloud_controller.system_domain.value ))
  cf:
    api_url: https://api.(( .cloud_controller.system_domain.value ))
    uaa_url: https://login.(( .cloud_controller.system_domain.value ))
    notifications_service_url: https://notifications.(( .cloud_controller.system_domain.value ))
    admin_username: (( .uaa.push_apps_manager_credentials.identity ))
    admin_password: (( .uaa.push_apps_manager_credentials.password ))
    system_domain: (( .cloud_controller.system_domain.value ))
    apps_domain: (( .cloud_controller.apps_domain.value ))
  invitations:
    instances: $( variable "push_apps_manager_invitations_instances" )
    memory: (( .properties.push_apps_manager_invitations_memory.value ))
    uaa_client_secret: (( .uaa.invitations_client_credentials.password ))
  networking:
    enable_space_developer_self_service: (( .properties.cf_networking_enable_space_developer_self_service.value ))
  ssl:
    skip_cert_verify: (( .ha_proxy.skip_cert_verify.value ))
    disable_http_for_links: (( .properties.routing_disable_http.value ))
  login:
    saml:
      providers: (( .properties.uaa.selected_option.parsed_manifest(saml_provider) ))
