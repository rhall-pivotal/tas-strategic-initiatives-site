---
name: networking_service_mesh
label: Networking - Service Mesh
description: |
  Enabling Service Mesh allows optional ingress routing to applications through service mesh components. It also configures
  all container to container networking to route through sidecar proxies.

property_inputs:
  - reference: .properties.istio
    label: Service Mesh (Beta)
    description: |
      When enabled, a new kind of platform ingress router will be deployed, in parallel to the existing HTTP and TCP routers,
      offering new capabilities. Enable this only for deployments with fewer than 20,000 service mesh ingress routes and fewer than
      300 internal routes; core platform functions will be impacted at greater scale.
    selector_property_inputs:
    - reference: .properties.istio.disable
      label: |
        Disable
    - reference: .properties.istio.enable
      label: |
        Enable

  - reference: .istio_router.static_ips
    label: IP Addresses for Ingress Router
    description: |
      If you are deploying onto an infrastructure where automated load
      balancer assignment is not supported (vSphere), enter static IPs for
      your Istio Routers and configure a load balancer with these IPs. Otherwise,
      this field can be left blank and the Load Balancers field on the Resource
      Config tab can be filled out with the correct load balancer assignment
      for the Istio Router instance group.

  - reference: .properties.istio_domain
    label: External Domain
    description: |
      Configure DNS to resolve this domain to a load balancer in front of the Ingress Routers, and create the domain in CF so that developers can create routes from it.

  - reference: .properties.istio_frontend_tls_keypairs
    label: Ingress Router TLS Keypairs
    property_inputs:
    - reference: name
      label: Name
      description: A human-readable name describing the use of this certificate.
    - reference: certificate
      label: Certificate and Private Key for Istio Router
      description: |
        Private keys and certificates in PEM block format used for TLS handshakes with clients.
